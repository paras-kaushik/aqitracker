(this.webpackJsonpliveaqireact=this.webpackJsonpliveaqireact||[]).push([[0],{19:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),r=a(9),s=a.n(r),o=a(10),i=a(11),d=a(4),l=a(12),u=a(14),b=a(27),p=a(28),j=(a(19),a(1)),h=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var c;return Object(o.a)(this,a),(c=t.call(this,e)).pollingInterval=1e3,c.URL="ws://city-ws.herokuapp.com/",c.connect=function(){var e,t=new WebSocket(c.URL),a=Object(d.a)(c);t.onopen=function(){c.setState({socketObject:t}),a.pollingInterval=1e3,clearTimeout(e)},t.onmessage=function(e){var t=JSON.parse(e.data),a=c.state.data,n=new Date;t.forEach((function(e,t){var c=a.filter((function(t){return t.city===e.city}))[0];e.updatedAt=n,c?(c.aqi=e.aqi,c.updatedAt=e.updatedAt):a.push(e)})),a.sort((function(e,t){return t.aqi-e.aqi})),c.setState({data:a})},t.onclose=function(t){var n=a.pollingInterval;n*=2,e=setTimeout((function(){var e=c.state.socketObject;e&&e.readyState!==WebSocket.CLOSED||c.connect()}),Math.min(1e4,n))},t.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),t.close()}},c.getColorAccordingToAqi=function(e){var t;switch(!0){case e<=50:t="good";break;case e<=100:t="satisfactory";break;case e<=200:t="moderate";break;case e<=300:t="poor";break;case e<=400:t="very-poor";break;default:t="severe"}return"primary-text ".concat(t)},c.getUpdatedAt=function(e){var t,a=new Date,c=a.getHours(),n=a.getMinutes(),r=a.getSeconds(),s=e.updatedAt.getHours(),o=e.updatedAt.getMinutes(),i=e.updatedAt.getSeconds();switch(!0){case c!==s:t="".concat(e.updatedAt.getHours(),":00");break;case o!==n&&o+1!==n:t="Few minutes ago";break;case o+1===n||r>30+i:t="A minute ago";break;case i===r:t="Just now";break;case i-10<r<i+10:t="few seconds ago";break;default:t="A Day ago"}return t},c.state={socketObject:null,data:[]},c}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.connect()}},{key:"render",value:function(){var e=this,t=this.state.data;return Object(j.jsx)(b.a,{className:"mt-3 p-4",children:Object(j.jsxs)(p.a,{className:"align-items-center",responsive:!0,bordered:!0,hover:!0,children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"text-center spaced-text",children:"City"}),Object(j.jsx)("th",{className:"text-center spaced-text",children:"Current AQI"}),Object(j.jsx)("th",{className:"text-center spaced-text",children:"Last Updated"})]})}),Object(j.jsxs)("tbody",{children:[t.map((function(t,a){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"text-center spaced-text",children:t.city}),Object(j.jsx)("td",{className:e.getColorAccordingToAqi(t.aqi)+" spaced-text",children:t.aqi.toFixed(2)}),Object(j.jsx)("td",{className:"text-center spaced-text",children:e.getUpdatedAt(t)})]})})),0===t.length?Object(j.jsx)("tr",{children:Object(j.jsx)("td",{colSpan:"3",className:"p-4 text-center",children:"No data available"})}):null]})]})})}}]),a}(n.a.Component);a(23),a(24);s.a.render(Object(j.jsx)(h,{}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.96d1dd43.chunk.js.map